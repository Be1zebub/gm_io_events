# GNU Make workspace makefile autogenerated by Premake

ifndef config
  config=releasewithsymbols_x86_64
endif

ifndef verbose
  SILENT = @
endif

ifeq ($(config),releasewithsymbols_x86_64)
  gmsv_io_events_config = releasewithsymbols_x86_64
  lua_shared_config = releasewithsymbols_x86_64
  tier1_config = releasewithsymbols_x86_64
  gmcl_io_events_config = releasewithsymbols_x86_64
endif
ifeq ($(config),releasewithsymbols_x86)
  gmsv_io_events_config = releasewithsymbols_x86
  lua_shared_config = releasewithsymbols_x86
  tier1_config = releasewithsymbols_x86
  gmcl_io_events_config = releasewithsymbols_x86
endif
ifeq ($(config),release_x86_64)
  gmsv_io_events_config = release_x86_64
  lua_shared_config = release_x86_64
  tier1_config = release_x86_64
  gmcl_io_events_config = release_x86_64
endif
ifeq ($(config),release_x86)
  gmsv_io_events_config = release_x86
  lua_shared_config = release_x86
  tier1_config = release_x86
  gmcl_io_events_config = release_x86
endif
ifeq ($(config),debug_x86_64)
  gmsv_io_events_config = debug_x86_64
  lua_shared_config = debug_x86_64
  tier1_config = debug_x86_64
  gmcl_io_events_config = debug_x86_64
endif
ifeq ($(config),debug_x86)
  gmsv_io_events_config = debug_x86
  lua_shared_config = debug_x86
  tier1_config = debug_x86
  gmcl_io_events_config = debug_x86
endif

PROJECTS := gmsv_io_events lua_shared tier1 gmcl_io_events

.PHONY: all clean help $(PROJECTS) garrysmod_common

all: $(PROJECTS)

garrysmod_common: lua_shared tier1

gmsv_io_events: lua_shared tier1
ifneq (,$(gmsv_io_events_config))
	@echo "==== Building gmsv_io_events ($(gmsv_io_events_config)) ===="
	@${MAKE} --no-print-directory -C . -f gmsv_io_events.make config=$(gmsv_io_events_config)
endif

lua_shared:
ifneq (,$(lua_shared_config))
	@echo "==== Building lua_shared ($(lua_shared_config)) ===="
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake -f lua_shared.make config=$(lua_shared_config)
endif

tier1:
ifneq (,$(tier1_config))
	@echo "==== Building tier1 ($(tier1_config)) ===="
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake -f tier1.make config=$(tier1_config)
endif

gmcl_io_events: lua_shared tier1
ifneq (,$(gmcl_io_events_config))
	@echo "==== Building gmcl_io_events ($(gmcl_io_events_config)) ===="
	@${MAKE} --no-print-directory -C . -f gmcl_io_events.make config=$(gmcl_io_events_config)
endif

clean:
	@${MAKE} --no-print-directory -C . -f gmsv_io_events.make clean
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake -f lua_shared.make clean
	@${MAKE} --no-print-directory -C ../../../../garrysmod_common/projects/linux/gmake -f tier1.make clean
	@${MAKE} --no-print-directory -C . -f gmcl_io_events.make clean

help:
	@echo "Usage: make [config=name] [target]"
	@echo ""
	@echo "CONFIGURATIONS:"
	@echo "  releasewithsymbols_x86_64"
	@echo "  releasewithsymbols_x86"
	@echo "  release_x86_64"
	@echo "  release_x86"
	@echo "  debug_x86_64"
	@echo "  debug_x86"
	@echo ""
	@echo "TARGETS:"
	@echo "   all (default)"
	@echo "   clean"
	@echo "   gmsv_io_events"
	@echo "   lua_shared"
	@echo "   tier1"
	@echo "   gmcl_io_events"
	@echo ""
	@echo "For more information, see https://github.com/premake/premake-core/wiki"